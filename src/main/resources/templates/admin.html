<!DOCTYPE html>
<html
  xmlns:th="http://www.thymeleaf.org"
  xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
  lang="ja">
	<head>
		<meta charset="UTF-8">
		<title>管理者ページ</title>
		<link th:href="@{/css/admin.css}" rel="stylesheet" type="text/css">
	</head>
<body>
	<div id="wrapper">
		<header>
			 <h1>管理者ページ</h1>
			 
			 <!-- ログイン表示  -->
			 <div class="admin-name" sec:authorize="hasRole('ADMIN')">
				 管理者：<span sec:authentication="name"></span>
			 </div>
			 <div class="admin-name" sec:authorize="!hasRole('ADMIN')">
				 管理者権限がありません
			 </div>
		</header>
		
		 <!-- フラッシュメッセージ -->
			 <div th:if="${successMessage}" class="alert alert-success">
			 <p th:text="${successMessage}"></p></div>
		
		<div class="container">
			<nav>
				<ul>
					<li><a th:href="@{/admin/product/list}">商品管理</a></li>	
					<li><a th:href="@{/admin/user/list}">会員管理</a></li>
					<li><a th:href="@{/admin/rental}">レンタル状況</a></li>
					<li><a th:href="@{/admin/return}">返却処理</a></li>
					<li><a th:href="@{/logout}">ログアウト</a></li>
				</ul>
			</nav>
			<main>
				<div class="card">
					<h3>最近追加された商品</h3>
					<table class="product-table">
						<thead>
							<tr>
								<th>ID</th>
								<th>タイトル</th>
								<th>種別</th>
								<th>入荷日</th>
								<th>発売日</th>
							</tr>
						</thead>
						<tbody>
							<tr th:each="product : ${recentProductlist}">
								<td th:text="${product.productId}" class="productId"></td>
								<td th:text="${product.productCategory}" class="productCategory"></td>
								<td th:text="${product.productName}" class="productName"></td>
								<td th:text="${product.arrivalDate != null ? #temporals.format(product.arrivalDate, 'yyyy/MM/dd') : ''}"></td>
								<td th:text="${product.releaseDate != null ? #temporals.format(product.releaseDate, 'yyyy/MM/dd') : ''}"></td>

							</tr>
							<tr th:if="${#lists.isEmpty(recentProductlist)}">
								<td colspan="6">商品が登録されていません</td>
							</tr>
						</tbody>
					</table>
			</main>
		</div>
	</div>
</body>
</html>
<!DOCTYPE html>
<html
  xmlns:th="http://www.thymeleaf.org"
  xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
  lang="ja">
	<head>
		<meta charset="UTF-8">
		<title>管理者ページ</title>
		<link th:href="@{/css/admin.css}" rel="stylesheet" type="text/css">
	</head>
<body>
	<div id="wrapper">
		<header>
			 <h1>管理者ページ</h1>
			 
			 <!-- ログイン表示  -->
			 <div class="admin-name" sec:authorize="hasRole('ADMIN')">
				 管理者：<span sec:authentication="name"></span>
			 </div>
			 <div class="admin-name" sec:authorize="!hasRole('ADMIN')">
				 管理者権限がありません
			 </div>
		</header>
		
		 <!-- フラッシュメッセージ -->
			 <div th:if="${successMessage}" class="alert alert-success">
			 <p th:text="${successMessage}"></p></div>
		
		<div class="container">
			<nav>
				<ul>
					<li><a th:href="@{/admin/product/list}">商品管理</a></li>	
					<li><a th:href="@{/admin/user/list}">会員管理</a></li>
					<li><a th:href="@{/admin/rental}">レンタル処理</a></li>
					<li><a th:href="@{/admin/return}">返却処理</a></li>
					<li><a th:href="@{/admin/rank}">ランキング</a></li>
					<li><a th:href="@{/logout}">ログアウト</a></li>
				</ul>
			</nav>
			<main>
				<div class="card product-card">
					<h3>最近追加された商品</h3>
					<table class="product-table">
						<thead>
							<tr>
								<th>ID</th>
								<th>種別</th>
								<th>タイトル</th>
								<th>クリエイター</th>
								<th>入荷日</th>
								<th>発売日</th>
								<th>在庫量</th>
							</tr>
						</thead>
						<tbody>
							<tr th:each="product : ${productList}">
								<td th:text="${product.productId}" class="productId"></td>
								<td th:text="${product.productCategory}" class="productCategory"></td>
								<td th:text="${product.productName}" class="productName"></td>
								<td th:text="${product.creator}" class="creator"></td>
								<td th:text="${product.arrivalDate}" class="arrivalDate"></td>
								<td th:text="${product.releaseDate}" class="releaseDate"></td>
								<td th:text="${product.stockQuantity}" class="stockQuantity"></td>
							</tr>
							<tr th:if="${#lists.isEmpty(productList)}">
								<td colspan="6">商品が登録されていません</td>
							</tr>
						</tbody>
					</table>
				</div>
				<div class="side-panel">
					<div class="card rental-card">
						<h3>現在のレンタル待ち</h3>
						
					</div><div class="pending-box">
							<span class="pending-count" 
							th:text="${pendingRentalCount}">0</span>
							<span class="pending-unit">件</span>
						</div>
						<a class="detail-btn" th:href="@{/admin/rental}">詳細を見る</a>
				</div>
				<div class="pending-box">
							<span class="pending-count" 
							th:text="${returnCount}">0</span>
							<span class="pending-unit">件</span>
						</div>
						<a class="detail-btn" th:href="@{/admin/return}">詳細を見る</a>
			</main>
		</div>
	</div>
</body>
</html>
